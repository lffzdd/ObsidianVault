>区块由区块头和区块体组成
# 🔧 区块（Block）的结构
![[Pasted image 20250415175435.png]] 
一个以太坊区块主要包括以下部分：
#### 1. `Block Header`（区块头）：
包含以下字段：
```cpp
struct Header {  
    parentHash,         //父区块的哈希  
    ommersHash,       	//叔块的哈希（以太坊支持叔块奖励）  
    beneficiary,        //接收区块奖励的地址（矿工）  
    stateRoot,          //当前世界状态的 Merkle Patricia Trie 的根哈希（非常关键）  
    transactionsRoot,   //所有交易的 Merkle Trie 的根  
    receiptsRoot,       //所有交易执行回执的 Trie 根  
    logsBloom,          //日志布隆过滤器（用于事件过滤）  
    difficulty,         //挖矿难度  
    number,             //区块高度  
    gasLimit,           //最大可用 Gas  
    gasUsed,            //实际使用的 Gas  
    timestamp,          //时间戳  
    extraData,          //附加信息  
    mixHash,            //用于 Ethash 的混合哈希  
    nonce,              //工作量证明的 nonce  
![[Pasted image 20250415181354.png]]}
```
#### 2. `Transactions`（交易列表）：
区块包含一个交易列表（数组），每笔交易是一个账户之间的转账，或者调用合约（智能合约）。
#### 3. `Ommers`（叔块列表）：
包含没有成为主链一部分但在短时间内有效的区块头。这是以太坊对抗中心化挖矿的机制。
# 🌍 世界状态（World State）
以太坊不像比特币那样追踪每一笔UTXO，而是追踪每个账户的状态。这些状态信息组织在一个名为 **World State Trie** 的 Merkle Patricia Trie 中。
每个账户包含：
- `nonce`: 账户的交易计数（防止重放攻击）
- `balance`: 账户余额（以wei计）
- `storageRoot`: 智能合约的存储数据根哈希（如果是EOA则为空）
- `codeHash`: 智能合约代码的哈希（普通账户为空）
> 🌱 所以，每次交易都会改变状态树（state trie），从而改变 `stateRoot`。

