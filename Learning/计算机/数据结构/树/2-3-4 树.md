##### 删除
![[Pasted image 20250405214739.png]]
###### 删除叶子节点
明白了，你给的是一棵 **2-3-4 树**，要删除节点 `2`。
在 2-3-4 树中，**删除操作**基本规则是：
- 保持所有节点至少有 2 个孩子（非叶子节点），或者至少有 1 个键（叶子节点）。
- 如果某个节点在删除过程中临时只有 0 个键，需要合并或借键。
- 树始终保持平衡。
**你要删除的是叶子节点的键 `2`，步骤是：**
---
1. **找到 `2`：**  
    直接在 `6` 的左孩子位置找到键 `2`，是叶子节点，没问题。
2. **判断节点情况：**  
    节点 `[2]` 只有 1 个键，删了就空了，不允许出现空节点，需要处理。
3. **怎么处理？** 叶子节点空了 → 需要：
    - **借**（从兄弟节点借一个键），如果兄弟节点有两个或更多键。
    - **合并**（如果兄弟节点也只有 1 个键，就合并）。
4. **观察兄弟节点：**
    - `[12]` 是 `2` 的右兄弟，只有一个键 `12`。
    - 也只有一个键 → **无法借键**，需要**合并**。
5. **执行合并：**
    - 父节点 `[6]` 拿出 `6` 下降下来，
    - 把 `[2]`, `[6]`, `[12]` 合成一个节点 `[2, 6, 12]`。
    - 原来父节点 `[6]` 被拿空了，父节点没有键了，不允许，这一步还得继续往上调整！
6. **父节点处理：**
    - 父节点 `[6]` 被清空，它的父节点是 `[36]`。
    - `[36]` 下降 `36` 来补上，形成新的结构。
**最终结构变成：**
```less
             [36,79,85]
            /    /    |    \
      [6,12] [57] [83] [93,98]
```
---
###### 删除非叶子节点
明白了，现在还是这棵**2-3-4 树**：
```less
             [36]
           /       \
      [6]             [79,85]
     /    \         /    |     \
  [2]     [12]   [57] 	[83] [93,98]
```
你要删除的是 **85**，那么完整步骤如下：
### 第一步：定位要删的键
- `85` 是 **内部节点**（属于 `[79,85]` 这个节点），而且不是叶子节点。
- 2-3-4 树的删除规则是：**不能直接删内部节点的键**，要找**前驱**或**后继**。
### 第二步：找替代键
- **前驱**（在左子树最右边的最大值）是 **83**。
- **后继**（在右子树最左边的最小值）是 **93**。
通常取 **前驱**或**后继**都行。
这里取 **前驱 83** 来代替 `85`，所以：
- 把 **83** 提到上面，放到 `[79,85]` 里，替换掉 `85`。
- 然后到 `[83]` 的位置真正**删除** `83`（因为提上去了，必须把原来下面的 83 删除掉）。
### 第三步：删除 83
- `[83]` 是叶子节点，且只有一个键。
- 删除后 `[83]` 这个节点就变成空的，需要处理！
- **空了怎么办？**
    - 看兄弟节点：
        - `[57]`：只有一个键。
        - `[93,98]`：有两个键，可以借。
    - 于是可以：
        - **向右兄弟 `[93,98]` 借一个键（93）**，
        - 或者
        - **合并兄弟节点**。
比较常见的是**直接合并**：
- 把空的 `[83]` 和右边 `[93,98]` 以及它们的父键（**83**）合并。
- 合并后，得到新节点 `[93,98]`。
注意，父节点 `[79,83]`（原来）也要删掉提下来的键！
### 第四步：更新父节点
- 删除后，父节点 `[79,83]` 中，只剩下一个键 `79`。
- 于是最终的结构变成：
```less
             [36]
           /      \
      [6]             [79]
     /    \         /     \
  [2]   [12]   [57]   [83,93,98]
```
✅ 最后树是这样的：
```less
             [36]
           /      \
      [6]             [79]
     /    \         /     \
  [2]   [12]   [57]   [83,93,98]
```
